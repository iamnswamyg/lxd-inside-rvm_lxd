# This file describes the network interfaces available on your system
# and how to activate them. For more information, see interfaces(5).

{% set host = pillar['ufconfig']['hosts'][grains.id] %}
{% set networking = host['networking'] %}
{% set network = pillar['ufconfig']['networks'][networking['network']] %}
{%- set ifaces = networking.get('ifaces', ['eth0']) %}
{%- set iface1 = ifaces[0] %}
{%- set iface2 = ifaces[1] %}

# The loopback network interface
auto lo
iface lo inet loopback

auto {{ iface1 }}
iface {{ iface1 }} inet static
        address {{ networking['address'] }}
        netmask {{ network['netmask'] }}
        network {{ network['network'] }}
        broadcast {{ network['broadcast'] }}
        gateway {{ network['gateway'] }}
        # dns-* options are implemented by the resolvconf package, if installed
        dns-nameservers {{ networking['dns-nameservers']|default(network['dns-nameservers'])|join(' ') }}
        dns-search {{ network['dns-search'] }}

auto {{ iface2 }}
iface {{ iface2 }} inet manual
